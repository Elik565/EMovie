# EMovie
EMServer — это HTTP-сервер, реализованный на C++ с использованием cpp-httplib, nlohmann::json, и PostgreSQL. Сервер обеспечивает:
    - Регистрацию и авторизацию пользователей;
    - Управление сессиями с использованием токенов;
    - Отображение списка фильмов;
    - Потоковую передачу HLS-видео (HTTP Live Streaming);
    - Разграничение прав доступа (пользователь / администратор);
    - Возможность добавления фильмов (для администраторов).
Основные компоненты:
    - EMServer — основной класс сервера, обрабатывающий HTTP-запросы и управляющий сессиями;
    - EMDatabase — модуль работы с базой данных PostgreSQL;
    - HLS-обработка — поддержка плейлистов и сегментов .ts;
    - JWT-like токены — для аутентификации пользователей и хранения информации о сессии.
Возможности:
    - POST /reg — регистрация нового пользователя;
    - POST /auth — авторизация пользователя, возвращает токен; 
    - POST /logout — завершение сессии;
    - GET /movie_list — список доступных фильмов;
    - GET /watch?title=<название> — получение HLS-плейлиста фильма;
    - POST /add_movie — добавление нового фильма (только для администраторов).
    
EMClient представляет собой консольного клиента, взаимодействующего с сервером EMServer через HTTP. Он предоставляет пользователю простой интерфейс для регистрации, авторизации, просмотра фильмов и (при наличии прав администратора) управления контентом.
Возможности:
    - Регистрация и вход в систему;
    - Хранение токена авторизации для дальнейших запросов;
    - Получение и отображение списка фильмов;
    - Проигрывание выбранного фильма через VLC Media Player;
    - Добавление нового фильма (только для администратора);
    - Завершение сессии и выход из профиля.

Использование:
    При запуске клиент:
        - Запрашивает логин и пароль;
        - Выполняет регистрацию, если аккаунт не найден;
        - После успешной авторизации выводит меню с возможными действиями:
            - Просмотр списка фильмов;
            - Воспроизведение фильма;
            - Добавление нового фильма (если администратор);
            - Повторная авторизация (на случай, если сервер перезапустится);
            - Выход из профиля.
            
Инструкция по запуску:
    Для работы сервера необходимо создать свою базу данных и восстановить данные из дампа emovie.sql: 
        1. Создаем базу данных: createdb -U <имя_пользователя> "EMovieDB";
        2. Загружаем дамп: psql -U <имя_пользователя> -d "EMovieDB" -f emovie.sql.
    При запуске сервера надо передавать логин и пароль для подключения к базе данных "EMovieDB".
